var Vt=Object.defineProperty;var Jt=(e,t,n)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var at=(e,t,n)=>Jt(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const r of u.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function k(){}function zt(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function Dt(e){return e()}function Ot(){return Object.create(null)}function H(e){e.forEach(Dt)}function Lt(e){return typeof e=="function"}function G(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Bt(e){return Object.keys(e).length===0}function xt(e,...t){if(e==null){for(const l of t)l(void 0);return k}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ct(e,t,n){e.$$.on_destroy.push(xt(t,n))}function f(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode&&e.parentNode.removeChild(e)}function Tt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function A(e){return document.createTextNode(e)}function _(){return A(" ")}function Ut(){return A("")}function N(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function pt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ft(e){return Array.from(e.childNodes)}function Mt(e,t){t=""+t,e.data!==t&&(e.data=t)}function O(e,t){e.value=t??""}let Z;function q(e){Z=e}function Ht(){if(!Z)throw new Error("Function called outside component initialization");return Z}const R=[],St=[];let W=[];const Pt=[],Kt=Promise.resolve();let ht=!1;function Qt(){ht||(ht=!0,Kt.then(_t))}function mt(e){W.push(e)}const dt=new Set;let K=0;function _t(){if(K!==0)return;const e=Z;do{try{for(;K<R.length;){const t=R[K];K++,q(t),Rt(t.$$)}}catch(t){throw R.length=0,K=0,t}for(q(null),R.length=0,K=0;St.length;)St.pop()();for(let t=0;t<W.length;t+=1){const n=W[t];dt.has(n)||(dt.add(n),n())}W.length=0}while(R.length);for(;Pt.length;)Pt.pop()();ht=!1,dt.clear(),q(e)}function Rt(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(mt)}}function Wt(e){const t=[],n=[];W.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),W=t}const ut=new Set;let M;function bt(){M={r:0,c:[],p:M}}function gt(){M.r||H(M.c),M=M.p}function L(e,t){e&&e.i&&(ut.delete(e),e.i(t))}function U(e,t,n,l){if(e&&e.o){if(ut.has(e))return;ut.add(e),M.c.push(()=>{ut.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function qt(e,t){const n=t.token={};function l(o,u,r,c){if(t.token!==n)return;t.resolved=c;let i=t.ctx;r!==void 0&&(i=i.slice(),i[r]=c);const s=o&&(t.current=o)(i);let a=!1;t.block&&(t.blocks?t.blocks.forEach((p,v)=>{v!==u&&p&&(bt(),U(p,1,1,()=>{t.blocks[v]===p&&(t.blocks[v]=null)}),gt())}):t.block.d(1),s.c(),L(s,1),s.m(t.mount(),t.anchor),a=!0),t.block=s,t.blocks&&(t.blocks[u]=s),a&&_t()}if(zt(e)){const o=Ht();if(e.then(u=>{q(o),l(t.then,1,t.value,u),q(null)},u=>{if(q(o),l(t.catch,2,t.error,u),q(null),!t.hasCatch)throw u}),t.current!==t.pending)return l(t.pending,0),!0}else{if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}}function At(e,t,n){const l=t.slice(),{resolved:o}=e;e.current===e.then&&(l[e.value]=o),e.current===e.catch&&(l[e.error]=o),e.block.p(l,n)}function it(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function st(e){e&&e.c()}function tt(e,t,n){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),mt(()=>{const u=e.$$.on_mount.map(Dt).filter(Lt);e.$$.on_destroy?e.$$.on_destroy.push(...u):H(u),e.$$.on_mount=[]}),o.forEach(mt)}function et(e,t){const n=e.$$;n.fragment!==null&&(Wt(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Gt(e,t){e.$$.dirty[0]===-1&&(R.push(e),Qt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function nt(e,t,n,l,o,u,r=null,c=[-1]){const i=Z;q(e);const s=e.$$={fragment:null,ctx:[],props:u,update:k,not_equal:o,bound:Ot(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:Ot(),dirty:c,skip_bound:!1,root:t.target||i.$$.root};r&&r(s.root);let a=!1;if(s.ctx=n?n(e,t.props||{},(p,v,...b)=>{const C=b.length?b[0]:v;return s.ctx&&o(s.ctx[p],s.ctx[p]=C)&&(!s.skip_bound&&s.bound[p]&&s.bound[p](C),a&&Gt(e,p)),v}):[],s.update(),a=!0,H(s.before_update),s.fragment=l?l(s.ctx):!1,t.target){if(t.hydrate){const p=Ft(t.target);s.fragment&&s.fragment.l(p),p.forEach(y)}else s.fragment&&s.fragment.c();t.intro&&L(e.$$.fragment),tt(e,t.target,t.anchor),_t()}q(i)}class lt{constructor(){at(this,"$$");at(this,"$$set")}$destroy(){et(this,1),this.$destroy=k}$on(t,n){if(!Lt(n))return k;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!Bt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Xt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xt);const Q=[];function vt(e,t=k){let n;const l=new Set;function o(c){if(G(e,c)&&(e=c,n)){const i=!Q.length;for(const s of l)s[1](),Q.push(s,e);if(i){for(let s=0;s<Q.length;s+=2)Q[s][0](Q[s+1]);Q.length=0}}}function u(c){o(c(e))}function r(c,i=k){const s=[c,i];return l.add(s),l.size===1&&(n=t(o,u)||k),c(e),()=>{l.delete(s),l.size===0&&n&&(n(),n=null)}}return{set:o,update:u,subscribe:r}}const Yt=JSON.parse(localStorage.getItem("user")),z=vt(Yt||null);z.subscribe(e=>{e?localStorage.setItem("user",JSON.stringify(e)):localStorage.removeItem("user")});function Zt(e){let t,n,l,o,u,r,c,i,s,a,p,v,b,C,m,$,g,S,E,I,B,x,D,X,P,T,$t,V,yt,Y,ot,wt,J,kt,rt,ft,Ct;return{c(){t=d("div"),n=d("form"),l=d("p"),l.textContent="Log in with username and password",o=_(),u=d("div"),r=d("label"),r.textContent="Username",c=_(),i=d("input"),s=_(),a=d("div"),p=d("label"),p.textContent="Password",v=_(),b=d("input"),C=_(),m=d("button"),m.textContent="Log in",$=_(),g=d("form"),S=d("p"),S.textContent="Create a user if you don't have one",E=_(),I=d("div"),B=d("label"),B.textContent="Username",x=_(),D=d("input"),X=_(),P=d("div"),T=d("label"),T.textContent="Password",$t=_(),V=d("input"),yt=_(),Y=d("div"),ot=d("label"),ot.textContent="Email",wt=_(),J=d("input"),kt=_(),rt=d("button"),rt.textContent="Create user",h(r,"for","username"),h(i,"type","text"),h(i,"id","username"),h(p,"for","password"),h(b,"type","password"),h(b,"id","password"),h(m,"type","submit"),h(B,"for","username"),h(D,"type","text"),h(D,"id","username"),h(T,"for","password"),h(V,"type","password"),h(V,"id","password"),h(ot,"for","email"),h(J,"type","email"),h(J,"id","email"),h(rt,"type","submit"),h(t,"class","content")},m(j,F){w(j,t,F),f(t,n),f(n,l),f(n,o),f(n,u),f(u,r),f(u,c),f(u,i),O(i,e[0]),f(n,s),f(n,a),f(a,p),f(a,v),f(a,b),O(b,e[1]),f(n,C),f(n,m),f(t,$),f(t,g),f(g,S),f(g,E),f(g,I),f(I,B),f(I,x),f(I,D),O(D,e[2]),f(g,X),f(g,P),f(P,T),f(P,$t),f(P,V),O(V,e[3]),f(g,yt),f(g,Y),f(Y,ot),f(Y,wt),f(Y,J),O(J,e[4]),f(g,kt),f(g,rt),ft||(Ct=[N(i,"input",e[7]),N(b,"input",e[8]),N(n,"submit",pt(e[5])),N(D,"input",e[9]),N(V,"input",e[10]),N(J,"input",e[11]),N(g,"submit",pt(e[6]))],ft=!0)},p(j,[F]){F&1&&i.value!==j[0]&&O(i,j[0]),F&2&&b.value!==j[1]&&O(b,j[1]),F&4&&D.value!==j[2]&&O(D,j[2]),F&8&&V.value!==j[3]&&O(V,j[3]),F&16&&J.value!==j[4]&&O(J,j[4])},i:k,o:k,d(j){j&&y(t),ft=!1,H(Ct)}}}function te(e,t,n){let l="",o="",u="",r="",c="";const i=()=>{fetch("http://localhost:8080/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,password:o})}).then(m=>{if(m.status<299)return m.json();m.status>299}).then(m=>{m&&z.set(m)}).catch(m=>{console.log("Error login in: ",m)})},s=()=>{fetch("http://localhost:8080/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,password:r,email:c})}).then(m=>{if(m.status<299)return m.json();m.status>299}).then(m=>{m&&z.set(m)}).catch(m=>{console.log("Error login in: ",m)})};function a(){l=this.value,n(0,l)}function p(){o=this.value,n(1,o)}function v(){u=this.value,n(2,u)}function b(){r=this.value,n(3,r)}function C(){c=this.value,n(4,c)}return[l,o,u,r,c,i,s,a,p,v,b,C]}class ee extends lt{constructor(t){super(),nt(this,t,te,Zt,G,{})}}const ne=vt(null);function Et(e,t,n){const l=e.slice();return l[8]=t[n],l}function le(e){let t=e[11]+"",n;return{c(){n=A(t)},m(l,o){w(l,n,o)},p:k,d(l){l&&y(n)}}}function oe(e){let t,n=it(e[7]),l=[];for(let o=0;o<n.length;o+=1)l[o]=jt(Et(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=Ut()},m(o,u){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,u);w(o,t,u)},p(o,u){if(u&3){n=it(o[7]);let r;for(r=0;r<n.length;r+=1){const c=Et(o,n,r);l[r]?l[r].p(c,u):(l[r]=jt(c),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(o){o&&y(t),Tt(l,o)}}}function jt(e){let t,n=e[8].caption+"",l,o,u,r,c,i,s,a,p;function v(){return e[3](e[8])}return{c(){t=d("li"),l=A(n),o=_(),u=d("div"),r=d("button"),r.textContent="Vote",c=_(),i=d("p"),i.textContent=`${e[8].votes} Votes`,s=_(),h(u,"class","vote-details svelte-1sy43wq"),h(t,"class","svelte-1sy43wq")},m(b,C){w(b,t,C),f(t,l),f(t,o),f(t,u),f(u,r),f(u,c),f(u,i),f(t,s),a||(p=N(r,"click",v),a=!0)},p(b,C){e=b},d(b){b&&y(t),a=!1,p()}}}function re(e){let t;return{c(){t=A("its loading…")},m(n,l){w(n,t,l)},p:k,d(n){n&&y(t)}}}function ue(e){let t,n={ctx:e,current:null,token:null,hasCatch:!0,pending:re,then:oe,catch:le,value:7,error:11};return qt(e[0],n),{c(){t=d("ul"),n.block.c(),h(t,"class","vos svelte-1sy43wq")},m(l,o){w(l,t,o),n.block.m(t,n.anchor=null),n.mount=()=>t,n.anchor=null},p(l,[o]){e=l,At(n,e,o)},i:k,o:k,d(l){l&&y(t),n.block.d(),n.token=null,n=null}}}function ie(e,t,n){let l;ct(e,z,s=>n(5,l=s));let{pollID:o}=t,u=l.username;const r=fetch("http://localhost:8080/voteops/"+o).then(s=>s.json()),c=s=>{console.log(o,u,s),fetch("http://localhost:8080/votes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pollID:o,username:u,voteOption:s})}).then(a=>{if(a.status<299)return a.json();a.status>299}).then(a=>{a&&ne.set(a)}).catch(a=>{console.log("Error login in: ",a)})},i=s=>{c(s.presentationOrder)};return e.$$set=s=>{"pollID"in s&&n(2,o=s.pollID)},[r,c,o,i]}class se extends lt{constructor(t){super(),nt(this,t,ie,ue,G,{pollID:2})}}function Nt(e,t,n){const l=e.slice();return l[5]=t[n],l}function ce(e){let t=e[8]+"",n;return{c(){n=A(t)},m(l,o){w(l,n,o)},p:k,i:k,o:k,d(l){l&&y(n)}}}function fe(e){let t,n,l=it(e[4]),o=[];for(let r=0;r<l.length;r+=1)o[r]=It(Nt(e,l,r));const u=r=>U(o[r],1,1,()=>{o[r]=null});return{c(){for(let r=0;r<o.length;r+=1)o[r].c();t=Ut()},m(r,c){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(r,c);w(r,t,c),n=!0},p(r,c){if(c&3){l=it(r[4]);let i;for(i=0;i<l.length;i+=1){const s=Nt(r,l,i);o[i]?(o[i].p(s,c),L(o[i],1)):(o[i]=It(s),o[i].c(),L(o[i],1),o[i].m(t.parentNode,t))}for(bt(),i=l.length;i<o.length;i+=1)u(i);gt()}},i(r){if(!n){for(let c=0;c<l.length;c+=1)L(o[c]);n=!0}},o(r){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)U(o[c]);n=!1},d(r){r&&y(t),Tt(o,r)}}}function It(e){let t,n,l,o,u,r,c,i,s,a;return i=new se({props:{pollID:e[5].pollID}}),{c(){t=d("div"),n=d("h3"),n.textContent=`${e[5].question}`,l=_(),o=d("p"),o.textContent=`Poll created: ${e[1](e[5].publishedAt)}`,u=_(),r=d("p"),r.textContent=`Poll is valid until: ${e[1](e[5].validUntil)}`,c=_(),st(i.$$.fragment),s=_(),h(t,"class","poll svelte-jilczm")},m(p,v){w(p,t,v),f(t,n),f(t,l),f(t,o),f(t,u),f(t,r),f(t,c),tt(i,t,null),f(t,s),a=!0},p:k,i(p){a||(L(i.$$.fragment,p),a=!0)},o(p){U(i.$$.fragment,p),a=!1},d(p){p&&y(t),et(i)}}}function ae(e){let t;return{c(){t=A("its loading…")},m(n,l){w(n,t,l)},p:k,i:k,o:k,d(n){n&&y(t)}}}function de(e){let t,n,l={ctx:e,current:null,token:null,hasCatch:!0,pending:ae,then:fe,catch:ce,value:4,error:8,blocks:[,,,]};return qt(e[0],l),{c(){t=d("div"),l.block.c(),h(t,"class","polls svelte-jilczm")},m(o,u){w(o,t,u),l.block.m(t,l.anchor=null),l.mount=()=>t,l.anchor=null,n=!0},p(o,[u]){e=o,At(l,e,u)},i(o){n||(L(l.block),n=!0)},o(o){for(let u=0;u<3;u+=1){const r=l.blocks[u];U(r)}n=!1},d(o){o&&y(t),l.block.d(),l.token=null,l=null}}}function pe(e,t,n){let l;return ct(e,z,r=>n(2,l=r)),l.username,[fetch("http://localhost:8080/polls").then(r=>r.json()),r=>new Date(r).toLocaleString()]}class he extends lt{constructor(t){super(),nt(this,t,pe,de,G,{})}}const me=vt(null);function _e(e){let t,n,l,o,u,r,c,i,s,a,p,v,b,C,m,$,g,S,E,I,B,x,D,X;return{c(){t=d("form"),n=d("div"),l=d("label"),l.textContent="Question",o=_(),u=d("input"),r=_(),c=d("div"),i=d("label"),i.textContent="Option 1",s=_(),a=d("input"),p=_(),v=d("div"),b=d("label"),b.textContent="Option 2",C=_(),m=d("input"),$=_(),g=d("div"),S=d("label"),S.textContent="Deadline for poll",E=_(),I=d("input"),B=_(),x=d("button"),x.textContent="Create poll",h(l,"for","question"),h(u,"type","text"),h(u,"id","question"),h(i,"for","vo1"),h(a,"type","text"),h(a,"id","vo1"),h(b,"for","vo2"),h(m,"type","text"),h(m,"id","vo2"),h(S,"for","validUntil"),h(I,"type","datetime-local"),h(I,"id","validUntil"),h(x,"type","submit")},m(P,T){w(P,t,T),f(t,n),f(n,l),f(n,o),f(n,u),O(u,e[0]),f(t,r),f(t,c),f(c,i),f(c,s),f(c,a),O(a,e[2]),f(t,p),f(t,v),f(v,b),f(v,C),f(v,m),O(m,e[3]),f(t,$),f(t,g),f(g,S),f(g,E),f(g,I),O(I,e[1]),f(t,B),f(t,x),D||(X=[N(u,"input",e[5]),N(a,"input",e[6]),N(m,"input",e[7]),N(I,"input",e[8]),N(t,"submit",pt(e[4]))],D=!0)},p(P,[T]){T&1&&u.value!==P[0]&&O(u,P[0]),T&4&&a.value!==P[2]&&O(a,P[2]),T&8&&m.value!==P[3]&&O(m,P[3]),T&2&&O(I,P[1])},i:k,o:k,d(P){P&&y(t),D=!1,H(X)}}}let be=!1;function ge(e,t,n){let l;ct(e,z,S=>n(11,l=S));let o=l.username,u="",r=null,c=0,i="",s="",a=[];const p=S=>S?new Date(S).toISOString():null,v=S=>{a.push({caption:S,presentationOrder:c}),c++},b=()=>{const S=p(r);v(i),v(s),fetch("http://localhost:8080/polls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,question:u,validUntil:S,isPublic:be,voteOptions:a})}).then(E=>{if(E.status<299)return E.json();E.status>299}).then(E=>{E&&me.set(E)}).catch(E=>{console.log("Error creating poll: ",E)})};function C(){u=this.value,n(0,u)}function m(){i=this.value,n(2,i)}function $(){s=this.value,n(3,s)}function g(){r=this.value,n(1,r)}return[u,r,i,s,b,C,m,$,g]}class ve extends lt{constructor(t){super(),nt(this,t,ge,_e,G,{})}}function $e(e){let t,n,l,o,u,r;return u=new ee({}),{c(){t=d("h1"),t.textContent="Welcome to Smart Voting App!👋🏽",n=_(),l=d("h2"),l.textContent="Please log in to create a Poll!",o=_(),st(u.$$.fragment)},m(c,i){w(c,t,i),w(c,n,i),w(c,l,i),w(c,o,i),tt(u,c,i),r=!0},p:k,i(c){r||(L(u.$$.fragment,c),r=!0)},o(c){U(u.$$.fragment,c),r=!1},d(c){c&&(y(t),y(n),y(l),y(o)),et(u,c)}}}function ye(e){let t,n,l=e[0].username+"",o,u,r,c,i,s,a,p,v,b,C,m;return i=new ve({}),a=new he({}),{c(){t=d("h1"),n=A("Hello, "),o=A(l),u=_(),r=d("p"),r.textContent="As a logged in user you can create a poll.",c=_(),st(i.$$.fragment),s=_(),st(a.$$.fragment),p=_(),v=d("input"),h(v,"type","button"),v.value="Logout"},m($,g){w($,t,g),f(t,n),f(t,o),w($,u,g),w($,r,g),w($,c,g),tt(i,$,g),w($,s,g),tt(a,$,g),w($,p,g),w($,v,g),b=!0,C||(m=N(v,"click",e[2]),C=!0)},p($,g){(!b||g&1)&&l!==(l=$[0].username+"")&&Mt(o,l)},i($){b||(L(i.$$.fragment,$),L(a.$$.fragment,$),b=!0)},o($){U(i.$$.fragment,$),U(a.$$.fragment,$),b=!1},d($){$&&(y(t),y(u),y(r),y(c),y(s),y(p),y(v)),et(i,$),et(a,$),C=!1,m()}}}function we(e){let t,n,l,o,u;const r=[ye,$e],c=[];function i(s,a){return s[1]?0:1}return l=i(e),o=c[l]=r[l](e),{c(){t=d("div"),n=d("div"),o.c(),h(t,"class","content")},m(s,a){w(s,t,a),f(t,n),c[l].m(n,null),u=!0},p(s,[a]){let p=l;l=i(s),l===p?c[l].p(s,a):(bt(),U(c[p],1,1,()=>{c[p]=null}),gt(),o=c[l],o?o.p(s,a):(o=c[l]=r[l](s),o.c()),L(o,1),o.m(n,null))},i(s){u||(L(o),u=!0)},o(s){U(o),u=!1},d(s){s&&y(t),c[l].d()}}}function ke(e,t,n){let l,o;ct(e,z,r=>n(0,o=r));const u=()=>{z.set(null)};return e.$$.update=()=>{e.$$.dirty&1&&n(1,l=o!==null)},[o,l,u]}class Ce extends lt{constructor(t){super(),nt(this,t,ke,we,G,{})}}new Ce({target:document.getElementById("app")});
